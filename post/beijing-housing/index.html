<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Predicting Apartment Prices in Beijing | Asante&#39;s Lab</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="This project dives into predicting apartment prices in Beijing through a comprehensive data science pipeline. From data cleaning and exploration to building and fine-tuning models, it navigates the complexities of the housing market.">
    <meta name="generator" content="Hugo 0.117.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/mypyeconlab/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Predicting Apartment Prices in Beijing" />
<meta property="og:description" content="This project dives into predicting apartment prices in Beijing through a comprehensive data science pipeline. From data cleaning and exploration to building and fine-tuning models, it navigates the complexities of the housing market." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yasante.github.io/mypyeconlab/post/beijing-housing/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-04-09T10:58:08-04:00" />
<meta property="article:modified_time" content="2023-04-09T10:58:08-04:00" />
<meta itemprop="name" content="Predicting Apartment Prices in Beijing">
<meta itemprop="description" content="This project dives into predicting apartment prices in Beijing through a comprehensive data science pipeline. From data cleaning and exploration to building and fine-tuning models, it navigates the complexities of the housing market."><meta itemprop="datePublished" content="2023-04-09T10:58:08-04:00" />
<meta itemprop="dateModified" content="2023-04-09T10:58:08-04:00" />
<meta itemprop="wordCount" content="617">
<meta itemprop="keywords" content="Predictive Analysis," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Predicting Apartment Prices in Beijing"/>
<meta name="twitter:description" content="This project dives into predicting apartment prices in Beijing through a comprehensive data science pipeline. From data cleaning and exploration to building and fine-tuning models, it navigates the complexities of the housing market."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  <header class="cover bg-top" style="background-image: url('https://yasante.github.io/mypyeconlab/images/apartment/apartment-price.jpg');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/mypyeconlab/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Asante&#39;s Lab
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/mypyeconlab/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/mypyeconlab/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/mypyeconlab/post/" title="Projects page">
              Projects
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/GoHugoIO" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <div class="f2 f1-l fw2 white-90 mb0 lh-title">Predicting Apartment Prices in Beijing</div>
          
            <div class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              This project dives into predicting apartment prices in Beijing through a comprehensive data science pipeline. From data cleaning and exploration to building and fine-tuning models, it navigates the complexities of the housing market.
            </div>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
      
      <a href="https://twitter.com/intent/tweet?url=https://yasante.github.io/mypyeconlab/post/beijing-housing/&amp;text=Predicting%20Apartment%20Prices%20in%20Beijing" class="ananke-social-link twitter no-underline" aria-label="share on Twitter">
        
        <span class="icon"> <svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
        
      </a>
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Predicting Apartment Prices in Beijing</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2023-04-09T10:58:08-04:00">April 9, 2023</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id="project-description">Project Description:</h2>
<h3 id="overview">Overview</h3>
<p>This project focuses on predicting apartment prices in Beijing using machine learning models. The dataset used for this analysis contains various features related to apartment listings, including location, amenities, and other relevant details. The goal is to build a model that accurately predicts apartment prices based on these features.</p>
<h3 id="steps">Steps</h3>
<ol>
<li>
<p><strong>Data Cleaning:</strong></p>
<ul>
<li>Removed irrelevant columns such as &lsquo;url&rsquo;, &lsquo;id&rsquo;, and others.</li>
<li>Eliminated outliers by trimming the dataset based on the total price.</li>
<li>Standardized column names to lowercase.</li>
</ul>
</li>
<li>
<p><strong>Data Exploration:</strong></p>
<ul>
<li>Utilized various visualization techniques, including scatter plots and maps, to explore the relationship between apartment prices and different features.</li>
<li>Conducted correlation analysis to identify relationships between numerical variables.</li>
<li>Split the dataset into training and testing sets using stratified sampling based on median income categories.</li>
</ul>
</li>
<li>
<p><strong>Data Preparation:</strong></p>
<ul>
<li>Developed a custom transformer (<code>MyMultiOutputLabelBinarizer</code>) to handle categorical data.</li>
<li>Created pipelines for numerical and categorical data transformations.</li>
<li>Employed a ColumnTransformer to combine these pipelines into a preprocessor.</li>
</ul>
</li>
</ol>
<p><strong>Plots</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/images/apartment/all-graphs.png" alt="/images/apartment/all-graphs.png"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Distribution of Variables</em></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/images/apartment/corr-inc-and-hous.png" alt="/images/apartment/corr-inc-and-hous.png"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Correlation between Apartment Size and Apartment prices</em></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="/images/apartment/Corr-Prices-and-Population.png" alt="/images/apartment/Corr-Prices-and-Population.png"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>Market Demand for Apartment</em></td>
</tr>
</tbody>
</table>
<ol start="4">
<li>
<p><strong>Model Building:</strong></p>
<ul>
<li>
<p>Constructed baseline models using Linear Regression, Decision Tree, and Random Forest.</p>
</li>
<li>
<p>Addressed underfitting and overfitting issues by evaluating model performance and selecting Random Forest as the most promising model.</p>
</li>
<li>
<p>Saved the trained models (Linear Regression, Decision Tree, and Random Forest) for future use.</p>
</li>
<li>
<p><strong>Baseline model</strong>
The MSE for the baseline model is 179.0.</p>
</li>
</ul>
<p>This is the maximum MSE our model can have to make it &ldquo;accepted&rdquo;.
An MSE greater than 179.0 implies the average of the housing value is even better
at estimating housing value than fitting a regression or other complex models</p>
<ul>
<li><strong>Linear Regression results</strong>
RMSE: 139.42133614236658</li>
</ul>
<p><em>After Cross-Val</em>
Mean Score: 139.52254373409954
Std_dev: 1.3327714776013142</p>
<ul>
<li><strong>Decision Tree results</strong>
RMSE: 0.1404066725057045</li>
</ul>
<p><em>After Cross-Val</em>
Mean Score: 83.30727227237523
Std_dev: 2.4450400849837757</p>
<ul>
<li><strong>Random Forest results</strong>
RMSE: 22.18044169487512</li>
</ul>
<p><em>After Cross-Val</em>
Mean Score: 60.09090732559777
Std_dev: 1.5415175381498831</p>
</li>
</ol>
<blockquote>
<p>The Linear Model is underfitted. Even though the RMSE of 139.42133614236658 is greater than that of the baseline model, it is not desirable enough, considering the fact that most of the house value falls between 120,000 and 265,000 dollars.</p>
</blockquote>
<blockquote>
<p>To resolve the underfitting of the model, the DecisionTree model which is a bit complex than the linear regression model was fitted. The DecisionTree model having 0 RMSE on the training dataset signals model overfitting. We employed the cross validation scores to evaluate the model. Using the cross validation, the RMSE for the val set was found to be 69568.4879. This tells us the Tree has overfitted the model since the val RMSE &gt; the train RMSE and its even performing worse than linear regression model.</p>
</blockquote>
<blockquote>
<p>We therefore employed another complex model, the RandomForest model, which builds on several DecisionTree models. The train RMSE was found to be 18546.2617 whereas the val RMSE was 49655.0302. This model is more desirable than both the linear and the decisiontree model. However, this model is still suffering from overfitting.</p>
</blockquote>
<ol start="5">
<li>
<p><strong>Fine-Tuning Models:</strong></p>
<ul>
<li>Conducted a grid search to find the best hyperparameters for the Random Forest model.</li>
<li>Identified the importance of each feature in the selected model.</li>
</ul>
</li>
<li>
<p><strong>Model Evaluation:</strong></p>
<ul>
<li>Evaluated the final model on the test dataset to assess its performance on unseen data.</li>
<li>Calculated the Root Mean Squared Error (RMSE) as a measure of prediction accuracy.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>The Random Forest model, after fine-tuning, demonstrates promising results in predicting apartment prices in Beijing. The project provides a comprehensive workflow from data cleaning and exploration to model building and evaluation. The saved models can be easily used for future predictions or integrated into other applications.</p>
<h3 id="code-and-resources">Code and Resources</h3>
<p>The Jupyter notebook and dataset for this project can be found in the provided Github Repository below. The dataset used is named &lsquo;housing_data2017.csv&rsquo;, and the models are saved as &lsquo;<em>linear_reg.pkl</em>&rsquo;, &lsquo;<em>decisiontree_reg.pkl</em>&rsquo;, and &lsquo;<em>randomforest_reg.pkl</em>&rsquo;.</p>
<p><a href="https://github.com/yasante/Beijing-House-Value-Prediction" title="Predicting Apartment Prices">Github Repo</a></p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/mypyeconlab/tags/predictive-analysis/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Predictive Analysis</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/mypyeconlab/post/netflix/">Netflix Movie Duration Analysis</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://yasante.github.io/mypyeconlab/" >
    &copy;  Asante's Lab 2023 
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/GoHugoIO" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
